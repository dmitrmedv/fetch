{"mappings":"YAAA,IAGIA,EAHEC,EAAOC,SAASC,cAAc,SAC9BC,EAAOF,SAASC,cAAc,SAIpC,SAASE,IACPC,MAAM,iCACHC,MAAK,SAAAC,G,OAAQA,EAAKC,M,IAClBF,MAAK,SAAAG,GAEFV,EADkB,IAAhBU,EAAKC,OACCD,EAAKA,EAAKC,OAAS,GAAGC,OAAS,EAE/B,EAGV,IAAIC,EAAWH,EAAKI,MAAK,SAACC,EAAGC,G,OAAMA,EAAEJ,OAASG,EAAEH,M,IAChDR,EAAKa,UAAmBJ,EA2CzBK,KAAI,SAAAC,G,IAAGC,EAAMD,EAANC,OAAQC,EAAIF,EAAJE,KAAMC,EAAQH,EAARG,SAAUC,EAAEJ,EAAFI,GAAIX,EAAMO,EAANP,OAClC,MAAO,8BAEcY,OADQZ,EAAO,2BACXY,OAARH,EAAK,KACPG,OADUF,EAAS,qBAEQE,OADnCJ,EAAO,wDAC+BI,OAAHD,EAAG,0B,IAG9CE,KAAK,G,IA/CVpB,IAEAJ,EAAKyB,iBAAiB,UAatB,SAAkBC,GAChBA,EAAEC,iBACF,IAAMC,EAAU,CACdR,KAAMM,EAAEG,OAAOC,SAASV,KAAKW,MAC7BV,SAAUK,EAAEG,OAAOC,SAAST,SAASU,MACrCZ,OAAQO,EAAEG,OAAOC,SAASX,OAAOY,MACjCpB,OAAQZ,GAEVM,MAAM,gCAAiC,CACrC2B,OAAQ,OACRC,KAAMC,KAAKC,UAAUP,GACrBQ,QAAS,CAAE,eAAgB,sBAE1B9B,MAAK,WACJF,IACAL,GAAS,C,IAEVsC,SAAQ,WACPX,EAAEG,OAAOS,QAASZ,EAAEG,OAAOC,SAASV,KAAKmB,O,OA7B/CpC,EAAKsB,iBAAiB,SAEtB,SAAsBC,GAChBA,EAAEG,OAAOW,UAAUC,SAAS,aAC9BC,QAAQC,IAAIjB,EAAEG,OAAOe,QAAQtB,IAC7BjB,MAAM,iCAAqDkB,OAApBG,EAAEG,OAAOe,QAAQtB,IAAM,CAC5DU,OAAQ,WACP1B,MAAK,W,OAAMF,G","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector('.form');\nconst list = document.querySelector('.list');\n\nlet count;\n\nfunction getList() {\n  fetch('http://localhost:3000/letters')\n    .then(resp => resp.json())\n    .then(data => {\n      if (data.length !== 0) {\n        count = data[data.length - 1].number + 1;\n      } else {\n        count = 1;\n      }\n\n      let dataSotr = data.sort((a, b) => b.number - a.number);\n      list.innerHTML = render(dataSotr);\n    });\n}\n\ngetList();\n\nform.addEventListener('submit', onSubmit);\n\nlist.addEventListener('click', deleteLetter);\n\nfunction deleteLetter(e) {\n  if (e.target.classList.contains('del-btn')) {\n    console.log(e.target.dataset.id);\n    fetch(`http://localhost:3000/letters/${e.target.dataset.id}`, {\n      method: 'DELETE',\n    }).then(() => getList());\n  }\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const message = {\n    name: e.target.elements.name.value,\n    lastname: e.target.elements.lastname.value,\n    addres: e.target.elements.addres.value,\n    number: count,\n  };\n  fetch('http://localhost:3000/letters', {\n    method: 'POST',\n    body: JSON.stringify(message),\n    headers: { 'Content-Type': 'application/json' },\n  })\n    .then(() => {\n      getList();\n      count += 1;\n    })\n    .finally(() => {\n      e.target.reset(), e.target.elements.name.focus();\n    });\n}\n\nfunction render(arr) {\n  return arr\n    .map(({ addres, name, lastname, id, number }) => {\n      return `<li>\n   <p>вхідний номер: ${number}к</p>   \n<p>замовник: ${name} ${lastname}</p>\n<p>адреса: ${addres}</p>\n<button type='button' class='del-btn' data-id=${id}>delete</button>\n</li>`;\n    })\n    .join('');\n}\n"],"names":["$b8f9b7833fa37166$var$count","$b8f9b7833fa37166$var$form","document","querySelector","$b8f9b7833fa37166$var$list","$b8f9b7833fa37166$var$getList","fetch","then","resp","json","data","length","number","dataSotr","sort","a","b","innerHTML","map","param","addres","name","lastname","id","concat","join","addEventListener","e","preventDefault","message","target","elements","value","method","body","JSON","stringify","headers","finally","reset","focus","classList","contains","console","log","dataset"],"version":3,"file":"index.d5d88b1d.js.map"}