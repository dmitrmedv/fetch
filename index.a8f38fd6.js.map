{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,SAC9BC,EAAOF,SAASC,cAAc,SAEpC,IAAIE,EAAQ,EAEZ,SAASC,IACPC,MAAM,iCACHC,MAAKC,GAAQA,EAAKC,SAClBF,MAAKG,IACgB,IAAhBA,EAAKC,SACPP,EAAQM,EAAKA,EAAKC,OAAS,GAAGC,OAAS,GAEzC,IAAIC,EAAWH,EAAKI,MAAK,CAACC,EAAGC,IAAMA,EAAEJ,OAASG,EAAEH,SAChDT,EAAKc,UAAmBJ,EA2CzBK,KAAI,EAACC,OAAEA,EAAMC,KAAEA,EAAIC,SAAEA,EAAQC,GAAEA,EAAEV,OAAEA,KAC3B,8B,gCAEUS,qB,wDAEyBC,6BAG3CC,KAAK,GAnD6B,G,CAIvClB,IAEAL,EAAKwB,iBAAiB,UAatB,SAAkBC,GAChBA,EAAEC,iBACF,MAAMC,EAAU,CACdP,KAAMK,EAAEG,OAAOC,SAAST,KAAKU,MAC7BT,SAAUI,EAAEG,OAAOC,SAASR,SAASS,MACrCX,OAAQM,EAAEG,OAAOC,SAASV,OAAOW,MACjClB,OAAQR,GAEVE,MAAM,gCAAiC,CACrCyB,OAAQ,OACRC,KAAMC,KAAKC,UAAUP,GACrBQ,QAAS,CAAE,eAAgB,sBAE1B5B,MAAK,KACJF,IACAD,GAAS,CAAC,IAEXgC,SAAQ,KACPX,EAAEG,OAAOS,QAASZ,EAAEG,OAAOC,SAAST,KAAKkB,OAAO,G,IA7BtDnC,EAAKqB,iBAAiB,SAEtB,SAAsBC,GAChBA,EAAEG,OAAOW,UAAUC,SAAS,aAC9BC,QAAQC,IAAIjB,EAAEG,OAAOe,QAAQrB,IAC7BhB,MAAM,iCAAiCmB,EAAEG,OAAOe,QAAQrB,KAAM,CAC5DS,OAAQ,WACPxB,MAAK,IAAMF,M","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector('.form');\nconst list = document.querySelector('.list');\n\nlet count = 1;\n\nfunction getList() {\n  fetch('http://localhost:3000/letters')\n    .then(resp => resp.json())\n    .then(data => {\n      if (data.length !== 0) {\n        count = data[data.length - 1].number + 1;\n      }\n      let dataSotr = data.sort((a, b) => b.number - a.number);\n      list.innerHTML = render(dataSotr);\n    });\n}\n\ngetList();\n\nform.addEventListener('submit', onSubmit);\n\nlist.addEventListener('click', deleteLetter);\n\nfunction deleteLetter(e) {\n  if (e.target.classList.contains('del-btn')) {\n    console.log(e.target.dataset.id);\n    fetch(`http://localhost:3000/letters/${e.target.dataset.id}`, {\n      method: 'DELETE',\n    }).then(() => getList());\n  }\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const message = {\n    name: e.target.elements.name.value,\n    lastname: e.target.elements.lastname.value,\n    addres: e.target.elements.addres.value,\n    number: count,\n  };\n  fetch('http://localhost:3000/letters', {\n    method: 'POST',\n    body: JSON.stringify(message),\n    headers: { 'Content-Type': 'application/json' },\n  })\n    .then(() => {\n      getList();\n      count += 1;\n    })\n    .finally(() => {\n      e.target.reset(), e.target.elements.name.focus();\n    });\n}\n\nfunction render(arr) {\n  return arr\n    .map(({ addres, name, lastname, id, number }) => {\n      return `<li>\n   <p>вхідний номер: ${number}к</p>   \n<p>замовник: ${name} ${lastname}</p>\n<p>адреса: ${addres}</p>\n<button type='button' class='del-btn' data-id=${id}>delete</button>\n</li>`;\n    })\n    .join('');\n}\n"],"names":["$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$list","$1f0dc3b9307be026$var$count","$1f0dc3b9307be026$var$getList","fetch","then","resp","json","data","length","number","dataSotr","sort","a","b","innerHTML","map","addres","name","lastname","id","join","addEventListener","e","preventDefault","message","target","elements","value","method","body","JSON","stringify","headers","finally","reset","focus","classList","contains","console","log","dataset"],"version":3,"file":"index.a8f38fd6.js.map"}