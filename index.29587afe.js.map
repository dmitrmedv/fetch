{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,SAE9BC,EAAUF,SAASC,cAAc,YACjCE,EAAQH,SAASC,cAAc,aAQrC,IAAIG,EAAW,IAAIC,sBASnB,SAAkBC,GAChBA,EAAQC,SAAQC,IACVA,EAAMC,iBACRC,GAAQ,EACRC,IAAmBC,MAAKC,IACtBd,EAAKe,mBAAmB,YAAaC,EAAWF,IAC5CA,EAAKG,KAAKC,QAAUP,GACtBN,EAASc,UAAUf,EAAM,I,MApBnB,CACdgB,KAAM,KACNC,WAAY,UAGVV,EAAO,EAsBX,SAASC,IACP,OAAOU,MAAM,kDAAoBX,KAAQE,MAAKU,IAC5C,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,MAAM,G,CAItB,SAASX,EAAWF,GAGlB,OAFAX,EAAQyB,UAAY,MAAMjB,QAAWG,EAAKG,KAAKC,YAExCJ,EAAKe,QACTC,KAAI,EAACC,GAAEA,EAAEC,KAAEA,EAAIC,MAAEA,KACT,4BAA4BF,gCACdE,SAAaD,yCACNA,+BAG7BE,KAAK,G,CAvCVtB,IAAeC,MAAKC,IAClBd,EAAKe,mBAAmB,YAAaC,EAAWF,IAEhDT,EAAS8B,QAAQ/B,EAAM","sources":["src/index.js"],"sourcesContent":["const list = document.querySelector('.list');\n// const loadMoreButton = document.querySelector('.load-more');\nconst counter = document.querySelector('.counter');\nconst guard = document.querySelector('.js-guard');\n\nconst BASE_URL = 'https://rickandmortyapi.com/api/character';\n\nconst options = {\n  root: null,\n  rootMargin: '200px',\n};\nlet observer = new IntersectionObserver(loadMore, options);\nlet page = 1;\n\ngetCharacter().then(data => {\n  list.insertAdjacentHTML('beforeend', makeRander(data));\n\n  observer.observe(guard);\n});\n\nfunction loadMore(entries) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      getCharacter(page).then(data => {\n        list.insertAdjacentHTML('beforeend', makeRander(data));\n        if (data.info.pages === page) {\n          observer.unobserve(guard);\n        }\n      });\n    }\n  });\n}\n\nfunction getCharacter() {\n  return fetch(`${BASE_URL}?page=${page}`).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction makeRander(data) {\n  counter.innerHTML = `<p>${page} of ${data.info.pages}</p>`;\n\n  return data.results\n    .map(({ id, name, image }) => {\n      return `<li class=\"card\" data-id=${id}>\n                <img src=${image} alt=${name} />\n                <p class=\"name\">${name}</p>\n              </li>`;\n    })\n    .join('');\n}\n"],"names":["$1f0dc3b9307be026$var$list","document","querySelector","$1f0dc3b9307be026$var$counter","$1f0dc3b9307be026$var$guard","$1f0dc3b9307be026$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$getCharacter","then","data","insertAdjacentHTML","$1f0dc3b9307be026$var$makeRander","info","pages","unobserve","root","rootMargin","fetch","resp","ok","Error","statusText","json","innerHTML","results","map","id","name","image","join","observe"],"version":3,"file":"index.29587afe.js.map"}