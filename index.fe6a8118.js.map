{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,SAC9BC,EAAOF,SAASC,cAAc,SAEpC,IAAIE,EACAC,GAAQ,EACRC,EAAW,KAEf,SAASC,IACPC,MAAM,iCACHC,MAAKC,GAAQA,EAAKC,SAClBF,MAAKG,IAEFR,EADkB,IAAhBQ,EAAKC,OACCD,EAAKA,EAAKC,OAAS,GAAGC,OAAS,EAE/B,EAGV,IAAIC,EAAWH,EAAKI,MAAK,CAACC,EAAGC,IAAMA,EAAEJ,OAASG,EAAEH,SAChDX,EAAKgB,UAAmBJ,EAqEzBK,KAAI,EAACC,OAAEA,EAAMC,KAAEA,EAAIC,SAAEA,EAAQC,GAAEA,EAAEV,OAAEA,KAC3B,8B,gCAEUS,qB,wDAEyBC,sEACEA,iCAG7CC,KAAK,GA9E6B,G,CAIvClB,IAEAP,EAAK0B,iBAAiB,UAuBtB,SAAkBC,GAChBA,EAAEC,iBACF,MAAMC,EAAU,CACdP,KAAMK,EAAEG,OAAOC,SAAST,KAAKU,MAC7BT,SAAUI,EAAEG,OAAOC,SAASR,SAASS,MACrCX,OAAQM,EAAEG,OAAOC,SAASV,OAAOW,MACjClB,OAAQV,GAENC,EACFG,MAAM,iCAAiCF,IAAY,CACjD2B,OAAQ,MACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEb,GAAIlB,KAAauB,MACvCpB,MAAK,KACNF,IACAF,GAAQ,EACRsB,EAAEG,OAAOQ,QAASX,EAAEG,OAAOC,SAAST,KAAKiB,OAAO,IAGlD/B,MAAM,gCAAiC,CACrCyB,OAAQ,OACRE,KAAMC,KAAKC,UAAUR,GACrBK,QAAS,CAAE,eAAgB,sBAE1BzB,MAAK,KACJF,IACAH,GAAS,CAAC,IAEXoC,SAAQ,KACPb,EAAEG,OAAOQ,QAASX,EAAEG,OAAOC,SAAST,KAAKiB,QACzClC,GAAQ,EACRoC,QAAQC,IAAI,UAAU,G,IAtD9BvC,EAAKuB,iBAAiB,SAEtB,SAAsBC,GAChBA,EAAEG,OAAOa,UAAUC,SAAS,YAC9BpC,MAAM,iCAAiCmB,EAAEG,OAAOe,QAAQrB,KAAM,CAC5DS,OAAQ,WACPxB,MAAK,IAAMF,MAEZoB,EAAEG,OAAOa,UAAUC,SAAS,eAC9BvC,GAAQ,EACRG,MAAM,iCAAiCmB,EAAEG,OAAOe,QAAQrB,MACrDf,MAAKC,GAAQA,EAAKC,SAClBF,MAAK,EAACa,KAAEA,EAAIC,SAAEA,EAAQF,OAAEA,EAAMG,GAAEA,MAC/BxB,EAAK+B,SAAST,KAAKU,MAAQV,EAC3BtB,EAAK+B,SAASR,SAASS,MAAQT,EAC/BvB,EAAK+B,SAASV,OAAOW,MAAQX,EAC7Bf,EAAWkB,CAAE,I","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector('.form');\nconst list = document.querySelector('.list');\n\nlet count;\nlet putch = false;\nlet idLetter = null;\n\nfunction getList() {\n  fetch('http://localhost:3000/letters')\n    .then(resp => resp.json())\n    .then(data => {\n      if (data.length !== 0) {\n        count = data[data.length - 1].number + 1;\n      } else {\n        count = 1;\n      }\n\n      let dataSotr = data.sort((a, b) => b.number - a.number);\n      list.innerHTML = render(dataSotr);\n    });\n}\n\ngetList();\n\nform.addEventListener('submit', onSubmit);\n\nlist.addEventListener('click', deleteLetter);\n\nfunction deleteLetter(e) {\n  if (e.target.classList.contains('del-btn')) {\n    fetch(`http://localhost:3000/letters/${e.target.dataset.id}`, {\n      method: 'DELETE',\n    }).then(() => getList());\n  }\n  if (e.target.classList.contains('putch-btn')) {\n    putch = true;\n    fetch(`http://localhost:3000/letters/${e.target.dataset.id}`)\n      .then(resp => resp.json())\n      .then(({ name, lastname, addres, id }) => {\n        form.elements.name.value = name;\n        form.elements.lastname.value = lastname;\n        form.elements.addres.value = addres;\n        idLetter = id;\n      });\n  }\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const message = {\n    name: e.target.elements.name.value,\n    lastname: e.target.elements.lastname.value,\n    addres: e.target.elements.addres.value,\n    number: count,\n  };\n  if (putch) {\n    fetch(`http://localhost:3000/letters/${idLetter}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ id: idLetter, ...message }),\n    }).then(() => {\n      getList();\n      putch = false;\n      e.target.reset(), e.target.elements.name.focus();\n    });\n  } else {\n    fetch('http://localhost:3000/letters', {\n      method: 'POST',\n      body: JSON.stringify(message),\n      headers: { 'Content-Type': 'application/json' },\n    })\n      .then(() => {\n        getList();\n        count += 1;\n      })\n      .finally(() => {\n        e.target.reset(), e.target.elements.name.focus();\n        putch = false;\n        console.log(123465798);\n      });\n  }\n}\n\nfunction render(arr) {\n  return arr\n    .map(({ addres, name, lastname, id, number }) => {\n      return `<li>\n   <p>вхідний номер: ${number}к</p>   \n<p>замовник: ${name} ${lastname}</p>\n<p>адреса: ${addres}</p>\n<button type='button' class='del-btn' data-id=${id}>delete</button>\n<button type='button' class='putch-btn' data-id=${id}>редагувати</button>\n</li>`;\n    })\n    .join('');\n}\n\nfunction putchLetter(e) {\n  // fetch(`http://localhost:3000/letters/${e.target.dataset.id}`, {\n  //   method: 'PUTCH',\n  //   body: JSON.stringify(message),\n  //   headers: { 'Content-Type': 'application/json' },\n  // })\n  //   .then(() => {\n  //     getList();\n  //     count += 1;\n  //   })\n  //   .finally(() => {\n  //     e.target.reset(), e.target.elements.name.focus();\n  //   });\n}\n"],"names":["$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$list","$1f0dc3b9307be026$var$count","$1f0dc3b9307be026$var$putch","$1f0dc3b9307be026$var$idLetter","$1f0dc3b9307be026$var$getList","fetch","then","resp","json","data","length","number","dataSotr","sort","a","b","innerHTML","map","addres","name","lastname","id","join","addEventListener","e","preventDefault","message","target","elements","value","method","headers","body","JSON","stringify","reset","focus","finally","console","log","classList","contains","dataset"],"version":3,"file":"index.fe6a8118.js.map"}