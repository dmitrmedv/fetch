const t=document.querySelector(".form"),e=document.querySelector(".list");let n,a=!1,s=null;function l(){fetch("http://localhost:3000/letters").then((t=>t.json())).then((t=>{n=0!==t.length?t[t.length-1].number+1:1;let a=t.sort(((t,e)=>e.number-t.number));e.innerHTML=a.map((({addres:t,name:e,lastname:n,id:a,number:s})=>`<li>\n   <p>вхідний номер: ${s}к</p>   \n<p>замовник: ${e} ${n}</p>\n<p>адреса: ${t}</p>\n<button type='button' class='del-btn' data-id=${a}>delete</button>\n<button type='button' class='putch-btn' data-id=${a}>редагувати</button>\n</li>`)).join("")}))}l(),t.addEventListener("submit",(function(t){t.preventDefault();const e={name:t.target.elements.name.value,lastname:t.target.elements.lastname.value,addres:t.target.elements.addres.value,number:n};a?fetch(`http://localhost:3000/letters/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,...e})}).then((()=>{l(),a=!1,t.target.reset(),t.target.elements.name.focus()})):fetch("http://localhost:3000/letters",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((()=>{l(),n+=1})).finally((()=>{t.target.reset(),t.target.elements.name.focus(),a=!1,console.log(123465798)}))})),e.addEventListener("click",(function(e){e.target.classList.contains("del-btn")&&fetch(`http://localhost:3000/letters/${e.target.dataset.id}`,{method:"DELETE"}).then((()=>l()));e.target.classList.contains("putch-btn")&&(a=!0,fetch(`http://localhost:3000/letters/${e.target.dataset.id}`).then((t=>t.json())).then((({name:e,lastname:n,addres:a,id:l})=>{t.elements.name.value=e,t.elements.lastname.value=n,t.elements.addres.value=a,s=l})))}));
//# sourceMappingURL=index.fe6a8118.js.map
